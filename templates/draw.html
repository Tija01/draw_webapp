<!-- On this page will be implemented the drawing functionality and a  brief tutorial-->
{% extends "layout.html" %}

{% block title %}
    Draw
{% endblock %}

{% block main %}
<!-- TODO: Add the drawing feature and it's tutorial-->
    <canvas id="myCanvas" width="200" height="100"></canvas>

    <hr>
    <h2 class="text-start"> Resize canvas</h2>
    <div class="row">
        <div class="col">
            <select id="size" class="form-select" aria-label="Resize select">
                <option selected>Choose canvas size</option>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="A4">A4 - landscape</option>
            </select>
        </div>

        <div class="col">
            <button onclick="resize(event)" class="btn btn-light">Resize</button>
        </div>
    </div>

    <hr>
    <h2 class="text-start">Draw a line</h2>
    <div class="row">
        <div class="col">
            <h3>First point: </h3>  
        </div>
        <div class="col">
            <input id="x1" autocomplete="off" class="form-control mx-auto w-auto" min="0" max="100" name="x1" placeholder="x1 [%]" type="number">
        </div>
        <div class="col">
            <input id="y1" autocomplete="off" class="form-control mx-auto w-auto" min="0" max="100" name="y1" placeholder="y1 [%]" type="number">
        </div>
    </div>

    <div class="row">
        <div class="col">
            <h3>Second point: </h3>
        </div>
        <div class="col">
            <input id="x2" autocomplete="off" class="form-control mx-auto w-auto" min="0" max="100" name="x2" placeholder="x2 [%]" type="number">
        </div>
        <div class="col">
            <input id="y2" autocomplete="off" class="form-control mx-auto w-auto" min="0" max="100" name="y2" placeholder="y2 [%]" type="number">
        </div>
    </div>

    <div class="col-3 ms-auto mt-2">
        <button onclick="line(event)" class="btn btn-light">Draw line</button>
    </div>


    <script> 
        var canvas = document.getElementById("myCanvas")
        var ctx = canvas.getContext("2d");
        
        function resize(event)
        {
            var select = document.getElementById('size');
            var option = select.options[select.selectedIndex];

            if (option.value == "small")
            {                
                canvas.width = 200;
                canvas.height = 100;
            }
            
            if (option.value == "medium")
            {
                canvas.width = 800;
                canvas.height = 400;
            }

            if (option.value == "A4")
            { 
                canvas.width = 3508;
                canvas.height = 2480;
            }
        }

        function line(event)
        {
            var x1 = document.getElementById('x1').value;
            var y1 = document.getElementById('y1').value;
            var x2 = document.getElementById('x2').value;
            var y2 = document.getElementById('y2').value;
            ctx.moveTo(x1/100*canvas.width, y1/100*canvas.height);
            ctx.lineTo(x2/100*canvas.width, y2/100*canvas.height);
            ctx.stroke();
        }

    </script>
{% endblock %}